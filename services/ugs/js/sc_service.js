/**
 * Created by comnic on 2018. 2. 25..
 */
//$.getScript("js/sc_util.js");

var site_log = new SiteLOG();

var web3Provider;
var web3;

var sc_code = "6060604052600060035534156200001557600080fd5b6040516020806200243e83398101604052808051906020019091905050336000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555080600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550620001756040805190810160405280600d81526020017f42617369632050726f647563740000000000000000000000000000000000000081525060016040805190810160405280601581526020017f42617369632050726f647563742053756d6d61727900000000000000000000008152506040805190810160405280600b81526020017f64656661756c742e706e670000000000000000000000000000000000000000008152506200017d6401000000000262001271176401000000009004565b5050620006ea565b60006200018962000407565b600360008154809291906001019190505581600001818152505033816020019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff168152505085816040018190525084816060018181525050838160800181905250828160a001819052504281610100018181525050600081610140019060038111156200021f57fe5b908160038111156200022d57fe5b8152505060028054806001018281620002479190620004ba565b91600052602060002090600b020160008390919091506000820151816000015560208201518160010160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506040820151816002019080519060200190620002cc929190620004ef565b50606082015181600301556080820151816004019080519060200190620002f5929190620004ef565b5060a082015181600501908051906020019062000314929190620004ef565b5060c08201518160060160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060e08201518160070190805190602001906200037a929190620004ef565b506101008201518160080155610120820151816009015561014082015181600a0160006101000a81548160ff02191690836003811115620003b757fe5b02179055505050507f475fed6f4fd12bb5b0a6910b1c61610b4d00ca1d74d7d83477bc1db15ed3553e81600001516040518082815260200191505060405180910390a16001915050949350505050565b6101606040519081016040528060008152602001600073ffffffffffffffffffffffffffffffffffffffff1681526020016200044262000576565b8152602001600081526020016200045862000576565b81526020016200046762000576565b8152602001600073ffffffffffffffffffffffffffffffffffffffff1681526020016200049362000576565b8152602001600081526020016000815260200160006003811115620004b457fe5b81525090565b815481835581811511620004ea57600b0281600b028360005260206000209182019101620004e991906200058a565b5b505050565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106200053257805160ff191683800117855562000563565b8280016001018555821562000563579182015b828111156200056257825182559160200191906001019062000545565b5b50905062000572919062000676565b5090565b602060405190810160405280600081525090565b6200067391905b808211156200066f576000808201600090556001820160006101000a81549073ffffffffffffffffffffffffffffffffffffffff0219169055600282016000620005dc91906200069e565b6003820160009055600482016000620005f691906200069e565b6005820160006200060891906200069e565b6006820160006101000a81549073ffffffffffffffffffffffffffffffffffffffff02191690556007820160006200064191906200069e565b60088201600090556009820160009055600a820160006101000a81549060ff021916905550600b0162000591565b5090565b90565b6200069b91905b80821115620006975760008160009055506001016200067d565b5090565b90565b50805460018160011615610100020316600290046000825580601f10620006c65750620006e7565b601f016020900490600052602060002090810190620006e6919062000676565b5b50565b611d4480620006fa6000396000f30060606040526004361061008e576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff168063412664ae146100935780637acc0b20146100e257806382b2e257146103cd578063b0a31753146103f6578063d96a094a1461041f578063e743c9821461044f578063ed3a0f6d14610472578063edf9c9ec14610576575b600080fd5b6100c8600480803573ffffffffffffffffffffffffffffffffffffffff169060200190919080359060200190919050506105dc565b604051808215151515815260200191505060405180910390f35b34156100ed57600080fd5b61010360048080359060200190919050506106c0565b604051808c81526020018b73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001806020018a815260200180602001806020018973ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018060200188815260200187815260200186600381111561019f57fe5b60ff16815260200185810385528e8181546001816001161561010002031660029004815260200191508054600181600116156101000203166002900480156102285780601f106101fd57610100808354040283529160200191610228565b820191906000526020600020905b81548152906001019060200180831161020b57829003601f168201915b505085810384528c8181546001816001161561010002031660029004815260200191508054600181600116156101000203166002900480156102ab5780601f10610280576101008083540402835291602001916102ab565b820191906000526020600020905b81548152906001019060200180831161028e57829003601f168201915b505085810383528b81815460018160011615610100020316600290048152602001915080546001816001161561010002031660029004801561032e5780601f106103035761010080835404028352916020019161032e565b820191906000526020600020905b81548152906001019060200180831161031157829003601f168201915b50508581038252898181546001816001161561010002031660029004815260200191508054600181600116156101000203166002900480156103b15780601f10610386576101008083540402835291602001916103b1565b820191906000526020600020905b81548152906001019060200180831161039457829003601f168201915b50509f5050505050505050505050505050505060405180910390f35b34156103d857600080fd5b6103e0610772565b6040518082815260200191505060405180910390f35b341561040157600080fd5b610409610859565b6040518082815260200191505060405180910390f35b610435600480803590602001909190505061085f565b604051808215151515815260200191505060405180910390f35b341561045a57600080fd5b6104706004808035906020019091905050610cee565b005b341561047d57600080fd5b61055c600480803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509190803590602001909190803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509190803590602001908201803590602001908080601f01602080910402602001604051908101604052809392919081815260200183838082843782019150505050505091905050611271565b604051808215151515815260200191505060405180910390f35b341561058157600080fd5b6105da600480803590602001909190803590602001908201803590602001908080601f016020809104026020016040519081016040528093929190818152602001838380828437820191505050505050919050506114ec565b005b6000600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663a9059cbb84846040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200182815260200192505050600060405180830381600087803b15156106a257600080fd5b6102c65a03f115156106b357600080fd5b5050506001905092915050565b6002818154811015156106cf57fe5b90600052602060002090600b02016000915090508060000154908060010160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060020190806003015490806004019080600501908060060160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690806007019080600801549080600901549080600a0160009054906101000a900460ff1690508b565b6000600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166370a08231336000604051602001526040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050602060405180830381600087803b151561083957600080fd5b6102c65a03f1151561084a57600080fd5b50505060405180519050905090565b60035481565b6000610869611a5a565b6000600354841115151561087c57600080fd5b60028481548110151561088b57fe5b90600052602060002090600b02016101606040519081016040529081600082015481526020016001820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001600282018054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561099f5780601f106109745761010080835404028352916020019161099f565b820191906000526020600020905b81548152906001019060200180831161098257829003601f168201915b5050505050815260200160038201548152602001600482018054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610a4b5780601f10610a2057610100808354040283529160200191610a4b565b820191906000526020600020905b815481529060010190602001808311610a2e57829003601f168201915b50505050508152602001600582018054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610aed5780601f10610ac257610100808354040283529160200191610aed565b820191906000526020600020905b815481529060010190602001808311610ad057829003601f168201915b505050505081526020016006820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001600782018054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610be55780601f10610bba57610100808354040283529160200191610be5565b820191906000526020600020905b815481529060010190602001808311610bc857829003601f168201915b505050505081526020016008820154815260200160098201548152602001600a820160009054906101000a900460ff166003811115610c2057fe5b6003811115610c2b57fe5b81525050915060006003811115610c3e57fe5b8261014001516003811115610c4f57fe5b141515610c5b57600080fd5b610c63610772565b905081606001518110151515610c7857600080fd5b610c863083606001516105dc565b50338260c0019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff168152505060018261014001906003811115610cd257fe5b90816003811115610cdf57fe5b81525050600192505050919050565b610cf6611a5a565b6003548211151515610d0757600080fd5b600282815481101515610d1657fe5b90600052602060002090600b02016101606040519081016040529081600082015481526020016001820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001600282018054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610e2a5780601f10610dff57610100808354040283529160200191610e2a565b820191906000526020600020905b815481529060010190602001808311610e0d57829003601f168201915b5050505050815260200160038201548152602001600482018054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610ed65780601f10610eab57610100808354040283529160200191610ed6565b820191906000526020600020905b815481529060010190602001808311610eb957829003601f168201915b50505050508152602001600582018054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610f785780601f10610f4d57610100808354040283529160200191610f78565b820191906000526020600020905b815481529060010190602001808311610f5b57829003601f168201915b505050505081526020016006820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001600782018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156110705780601f1061104557610100808354040283529160200191611070565b820191906000526020600020905b81548152906001019060200180831161105357829003601f168201915b505050505081526020016008820154815260200160098201548152602001600a820160009054906101000a900460ff1660038111156110ab57fe5b60038111156110b657fe5b815250509050600260038111156110c957fe5b81610140015160038111156110da57fe5b1415156110e657600080fd5b8060c0015173ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561112457600080fd5b6003816101400190600381111561113757fe5b9081600381111561114457fe5b81525050600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166323b872dd30836020015184606001516000604051602001526040518463ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019350505050602060405180830381600087803b151561125157600080fd5b6102c65a03f1151561126257600080fd5b50505060405180519050505050565b600061127b611a5a565b600360008154809291906001019190505581600001818152505033816020019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff168152505085816040018190525084816060018181525050838160800181905250828160a0018190525042816101000181815250506000816101400190600381111561131057fe5b9081600381111561131d57fe5b81525050600280548060010182816113359190611b04565b91600052602060002090600b020160008390919091506000820151816000015560208201518160010160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060408201518160020190805190602001906113b8929190611b36565b506060820151816003015560808201518160040190805190602001906113df929190611b36565b5060a08201518160050190805190602001906113fc929190611b36565b5060c08201518160060160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060e0820151816007019080519060200190611460929190611b36565b506101008201518160080155610120820151816009015561014082015181600a0160006101000a81548160ff0219169083600381111561149c57fe5b02179055505050507f475fed6f4fd12bb5b0a6910b1c61610b4d00ca1d74d7d83477bc1db15ed3553e81600001516040518082815260200191505060405180910390a16001915050949350505050565b6114f4611a5a565b600354831115151561150557600080fd5b60028381548110151561151457fe5b90600052602060002090600b02016101606040519081016040529081600082015481526020016001820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001600282018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156116285780601f106115fd57610100808354040283529160200191611628565b820191906000526020600020905b81548152906001019060200180831161160b57829003601f168201915b5050505050815260200160038201548152602001600482018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156116d45780601f106116a9576101008083540402835291602001916116d4565b820191906000526020600020905b8154815290600101906020018083116116b757829003601f168201915b50505050508152602001600582018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156117765780601f1061174b57610100808354040283529160200191611776565b820191906000526020600020905b81548152906001019060200180831161175957829003601f168201915b505050505081526020016006820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001600782018054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561186e5780601f106118435761010080835404028352916020019161186e565b820191906000526020600020905b81548152906001019060200180831161185157829003601f168201915b505050505081526020016008820154815260200160098201548152602001600a820160009054906101000a900460ff1660038111156118a957fe5b60038111156118b457fe5b815250509050600160038111156118c757fe5b81610140015160038111156118d857fe5b1415156118e457600080fd5b806020015173ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561192257600080fd5b60008160c0015173ffffffffffffffffffffffffffffffffffffffff161415151561194c57600080fd5b818160e001819052506002816101400190600381111561196857fe5b9081600381111561197557fe5b81525050600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663095ea7b33083606001516040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200182815260200192505050600060405180830381600087803b1515611a4157600080fd5b6102c65a03f11515611a5257600080fd5b505050505050565b6101606040519081016040528060008152602001600073ffffffffffffffffffffffffffffffffffffffff168152602001611a93611bb6565b815260200160008152602001611aa7611bb6565b8152602001611ab4611bb6565b8152602001600073ffffffffffffffffffffffffffffffffffffffff168152602001611ade611bb6565b8152602001600081526020016000815260200160006003811115611afe57fe5b81525090565b815481835581811511611b3157600b0281600b028360005260206000209182019101611b309190611bca565b5b505050565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10611b7757805160ff1916838001178555611ba5565b82800160010185558215611ba5579182015b82811115611ba4578251825591602001919060010190611b89565b5b509050611bb29190611cab565b5090565b602060405190810160405280600081525090565b611ca891905b80821115611ca4576000808201600090556001820160006101000a81549073ffffffffffffffffffffffffffffffffffffffff0219169055600282016000611c189190611cd0565b6003820160009055600482016000611c309190611cd0565b600582016000611c409190611cd0565b6006820160006101000a81549073ffffffffffffffffffffffffffffffffffffffff0219169055600782016000611c779190611cd0565b60088201600090556009820160009055600a820160006101000a81549060ff021916905550600b01611bd0565b5090565b90565b611ccd91905b80821115611cc9576000816000905550600101611cb1565b5090565b90565b50805460018160011615610100020316600290046000825580601f10611cf65750611d15565b601f016020900490600052602060002090810190611d149190611cab565b5b505600a165627a7a723058209499a33a916319ad243459f146b33cb193f617548e43a2e974dc9c78d02159820029";
var sc_abi = [ { "constant": true, "inputs": [], "name": "getTokenBalance", "outputs": [ { "name": "", "type": "uint256" } ], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [ { "name": "", "type": "uint256" } ], "name": "products", "outputs": [ { "name": "goodId", "type": "uint256" }, { "name": "seller", "type": "address" }, { "name": "title", "type": "string" }, { "name": "price", "type": "uint256" }, { "name": "summary", "type": "string" }, { "name": "imageName", "type": "string" }, { "name": "buyer", "type": "address" }, { "name": "deliveryNo", "type": "string" }, { "name": "registDt", "type": "uint256" }, { "name": "buyDt", "type": "uint256" }, { "name": "completeDt", "type": "uint256" }, { "name": "status", "type": "uint8" } ], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "productCnt", "outputs": [ { "name": "", "type": "uint256" } ], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [ { "name": "p_id", "type": "uint256" } ], "name": "completeSelling", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "anonymous": false, "inputs": [ { "indexed": false, "name": "p_id", "type": "uint256" }, { "indexed": false, "name": "p_name", "type": "string" }, { "indexed": false, "name": "p_price", "type": "uint256" } ], "name": "BuyProduct", "type": "event" }, { "constant": false, "inputs": [ { "name": "p_id", "type": "uint256" }, { "name": "p_delivery_no", "type": "string" } ], "name": "setDeliveryInfo", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "anonymous": false, "inputs": [ { "indexed": false, "name": "p_id", "type": "uint256" }, { "indexed": false, "name": "p_name", "type": "string" } ], "name": "CompleteSelling", "type": "event" }, { "anonymous": false, "inputs": [ { "indexed": false, "name": "p_id", "type": "uint256" }, { "indexed": false, "name": "p_name", "type": "string" }, { "indexed": false, "name": "p_delivery_no", "type": "string" } ], "name": "DeliveryProduct", "type": "event" }, { "anonymous": false, "inputs": [ { "indexed": false, "name": "p_id", "type": "uint256" }, { "indexed": false, "name": "p_name", "type": "string" } ], "name": "RegProduct", "type": "event" }, { "anonymous": false, "inputs": [ { "indexed": false, "name": "from", "type": "address" }, { "indexed": false, "name": "to", "type": "address" }, { "indexed": false, "name": "value", "type": "uint256" } ], "name": "SendToken", "type": "event" }, { "constant": false, "inputs": [ { "name": "p_id", "type": "uint256" } ], "name": "buy", "outputs": [ { "name": "", "type": "bool" } ], "payable": true, "stateMutability": "payable", "type": "function" }, { "constant": false, "inputs": [ { "name": "_to", "type": "address" }, { "name": "_value", "type": "uint256" } ], "name": "sendToken", "outputs": [], "payable": true, "stateMutability": "payable", "type": "function" }, { "constant": false, "inputs": [ { "name": "_title", "type": "string" }, { "name": "_price", "type": "uint256" }, { "name": "_summary", "type": "string" }, { "name": "_image", "type": "string" } ], "name": "regProduct", "outputs": [ { "name": "", "type": "bool" } ], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "inputs": [ { "name": "_tokenAddress", "type": "address" } ], "payable": false, "stateMutability": "nonpayable", "type": "constructor" } ];
var sc_address = "0x6fdfbc480fdb12d7b6d764d399b644ea20122520";
var Contract;
var UsedGoodsShop;

//var sc_token_abi;
// $.getJSON( "contract/BDGToken_ABI.json", function( data ) {
//     sc_token_abi = data;
// });

var sc_token_code = "60606040526012600360006101000a81548160ff021916908360ff160217905550600160075560016008556103e860095534156200003c57600080fd5b60405162001af038038062001af083398101604052808051906020019091908051820191906020018051820191905050828282336000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550600360009054906101000a900460ff1660ff16600a0a8302600481905550600454600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000208190555081600190805190602001906200012b92919062000151565b5080600290805190602001906200014492919062000151565b5050505050505062000200565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106200019457805160ff1916838001178555620001c5565b82800160010185558215620001c5579182015b82811115620001c4578251825591602001919060010190620001a7565b5b509050620001d49190620001d8565b5090565b620001fd91905b80821115620001f9576000816000905550600101620001df565b5090565b90565b6118e080620002106000396000f30060606040526004361061013e576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806305fefda71461023c57806306fdde0314610268578063095ea7b3146102f657806318160ddd1461035057806323b872dd14610379578063313ce567146103f257806342966c68146104215780634b7503341461045c57806370a082311461048557806379c65068146104d257806379cc67901461051457806380cec9171461056e5780638620410b146105915780638da5cb5b146105ba57806395d89b411461060f578063a6f2ae3a1461069d578063a9059cbb146106a7578063b414d4b6146106e9578063b5f3b1501461073a578063cae9ca5114610763578063dd62ed3e14610800578063e4849b321461086c578063e724529c1461088f578063f2fde38b146108d3575b60006009543402905080600560008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054101515156101b657600080fd5b6101e26000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff16338361090c565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc349081150290604051600060405180830381858888f193505050505050005b341561024757600080fd5b6102666004808035906020019091908035906020019091905050610bc4565b005b341561027357600080fd5b61027b610c31565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156102bb5780820151818401526020810190506102a0565b50505050905090810190601f1680156102e85780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b341561030157600080fd5b610336600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091908035906020019091905050610ccf565b604051808215151515815260200191505060405180910390f35b341561035b57600080fd5b610363610d5c565b6040518082815260200191505060405180910390f35b341561038457600080fd5b6103d8600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803573ffffffffffffffffffffffffffffffffffffffff16906020019091908035906020019091905050610d62565b604051808215151515815260200191505060405180910390f35b34156103fd57600080fd5b610405610e8f565b604051808260ff1660ff16815260200191505060405180910390f35b341561042c57600080fd5b6104426004808035906020019091905050610ea2565b604051808215151515815260200191505060405180910390f35b341561046757600080fd5b61046f610fa6565b6040518082815260200191505060405180910390f35b341561049057600080fd5b6104bc600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050610fac565b6040518082815260200191505060405180910390f35b34156104dd57600080fd5b610512600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091908035906020019091905050610fc4565b005b341561051f57600080fd5b610554600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091908035906020019091905050611135565b604051808215151515815260200191505060405180910390f35b341561057957600080fd5b61058f600480803590602001909190505061134f565b005b341561059c57600080fd5b6105a46113b4565b6040518082815260200191505060405180910390f35b34156105c557600080fd5b6105cd6113ba565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b341561061a57600080fd5b6106226113df565b6040518080602001828103825283818151815260200191508051906020019080838360005b83811015610662578082015181840152602081019050610647565b50505050905090810190601f16801561068f5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b6106a561147d565b005b34156106b257600080fd5b6106e7600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803590602001909190505061149d565b005b34156106f457600080fd5b610720600480803573ffffffffffffffffffffffffffffffffffffffff169060200190919050506114ac565b604051808215151515815260200191505060405180910390f35b341561074557600080fd5b61074d6114cc565b6040518082815260200191505060405180910390f35b341561076e57600080fd5b6107e6600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803590602001909190803590602001908201803590602001908080601f016020809104026020016040519081016040528093929190818152602001838380828437820191505050505050919050506114d2565b604051808215151515815260200191505060405180910390f35b341561080b57600080fd5b610856600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050611650565b6040518082815260200191505060405180910390f35b341561087757600080fd5b61088d6004808035906020019091905050611675565b005b341561089a57600080fd5b6108d1600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803515159060200190919050506116f1565b005b34156108de57600080fd5b61090a600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050611816565b005b60008273ffffffffffffffffffffffffffffffffffffffff161415151561093257600080fd5b80600560008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020541015151561098057600080fd5b600560008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205481600560008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205401111515610a0e57600080fd5b600a60008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff16151515610a6757600080fd5b600a60008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff16151515610ac057600080fd5b80600560008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254039250508190555080600560008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055508173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef836040518082815260200191505060405180910390a3505050565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515610c1f57600080fd5b81600781905550806008819055505050565b60018054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610cc75780601f10610c9c57610100808354040283529160200191610cc7565b820191906000526020600020905b815481529060010190602001808311610caa57829003601f168201915b505050505081565b600081600660003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055506001905092915050565b60045481565b6000600660008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020548211151515610def57600080fd5b81600660008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282540392505081905550610e8484848461090c565b600190509392505050565b600360009054906101000a900460ff1681565b600081600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205410151515610ef257600080fd5b81600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282540392505081905550816004600082825403925050819055503373ffffffffffffffffffffffffffffffffffffffff167fcc16f5dbb4873280815c1ee09dbd06736cffcc184412cf7a71a0fdb75d397ca5836040518082815260200191505060405180910390a260019050919050565b60075481565b60056020528060005260406000206000915090505481565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561101f57600080fd5b80600560008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282540192505081905550806004600082825401925050819055503073ffffffffffffffffffffffffffffffffffffffff1660007fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef836040518082815260200191505060405180910390a38173ffffffffffffffffffffffffffffffffffffffff163073ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef836040518082815260200191505060405180910390a35050565b600081600560008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020541015151561118557600080fd5b600660008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054821115151561121057600080fd5b81600560008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254039250508190555081600660008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282540392505081905550816004600082825403925050819055508273ffffffffffffffffffffffffffffffffffffffff167fcc16f5dbb4873280815c1ee09dbd06736cffcc184412cf7a71a0fdb75d397ca5836040518082815260200191505060405180910390a26001905092915050565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161415156113aa57600080fd5b8060098190555050565b60085481565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60028054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156114755780601f1061144a57610100808354040283529160200191611475565b820191906000526020600020905b81548152906001019060200180831161145857829003601f168201915b505050505081565b60006008543481151561148c57fe5b04905061149a30338361090c565b50565b6114a832838361090c565b5050565b600a6020528060005260406000206000915054906101000a900460ff1681565b60095481565b6000808490506114e28585610ccf565b15611647578073ffffffffffffffffffffffffffffffffffffffff16638f4ffcb1338630876040518563ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018481526020018373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200180602001828103825283818151815260200191508051906020019080838360005b838110156115dc5780820151818401526020810190506115c1565b50505050905090810190601f1680156116095780820380516001836020036101000a031916815260200191505b5095505050505050600060405180830381600087803b151561162a57600080fd5b6102c65a03f1151561163b57600080fd5b50505060019150611648565b5b509392505050565b6006602052816000526040600020602052806000526040600020600091509150505481565b60075481023073ffffffffffffffffffffffffffffffffffffffff16311015151561169f57600080fd5b6116aa33308361090c565b3373ffffffffffffffffffffffffffffffffffffffff166108fc60075483029081150290604051600060405180830381858888f1935050505015156116ee57600080fd5b50565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561174c57600080fd5b80600a60008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055507f48335238b4855f35377ed80f164e8c6f3c366e54ac00b96a6402d4a9814a03a58282604051808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001821515151581526020019250505060405180910390a15050565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561187157600080fd5b806000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550505600a165627a7a72305820bd1a4e44d03aed68a969ed88eb59d68781ee8274ada3f1cc8acca659d9c122ac0029";


var sc_token_abi = [ { "constant": true, "inputs": [ { "name": "", "type": "address" } ], "name": "frozenAccount", "outputs": [ { "name": "", "type": "bool" } ], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "totalSupply", "outputs": [ { "name": "", "type": "uint256" } ], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "symbol", "outputs": [ { "name": "", "type": "string" } ], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [ { "name": "", "type": "address" } ], "name": "balanceOf", "outputs": [ { "name": "", "type": "uint256" } ], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "buyPrice", "outputs": [ { "name": "", "type": "uint256" } ], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [ { "name": "", "type": "address" }, { "name": "", "type": "address" } ], "name": "allowance", "outputs": [ { "name": "", "type": "uint256" } ], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "decimals", "outputs": [ { "name": "", "type": "uint8" } ], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "rewardTimes", "outputs": [ { "name": "", "type": "uint256" } ], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "owner", "outputs": [ { "name": "", "type": "address" } ], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "name", "outputs": [ { "name": "", "type": "string" } ], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "sellPrice", "outputs": [ { "name": "", "type": "uint256" } ], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [ { "name": "target", "type": "address" }, { "name": "freeze", "type": "bool" } ], "name": "freezeAccount", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "anonymous": false, "inputs": [ { "indexed": true, "name": "from", "type": "address" }, { "indexed": false, "name": "value", "type": "uint256" } ], "name": "Burn", "type": "event" }, { "constant": false, "inputs": [ { "name": "_spender", "type": "address" }, { "name": "_value", "type": "uint256" }, { "name": "_extraData", "type": "bytes" } ], "name": "approveAndCall", "outputs": [ { "name": "success", "type": "bool" } ], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [ { "name": "newOwner", "type": "address" } ], "name": "transferOwnership", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "payable": true, "stateMutability": "payable", "type": "fallback" }, { "constant": false, "inputs": [ { "name": "target", "type": "address" }, { "name": "mintedAmount", "type": "uint256" } ], "name": "mintToken", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "inputs": [ { "name": "initialSupply", "type": "uint256" }, { "name": "tokenName", "type": "string" }, { "name": "tokenSymbol", "type": "string" } ], "payable": false, "stateMutability": "nonpayable", "type": "constructor" }, { "constant": false, "inputs": [ { "name": "amount", "type": "uint256" } ], "name": "sell", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [], "name": "buy", "outputs": [], "payable": true, "stateMutability": "payable", "type": "function" }, { "anonymous": false, "inputs": [ { "indexed": false, "name": "target", "type": "address" }, { "indexed": false, "name": "frozen", "type": "bool" } ], "name": "FrozenFunds", "type": "event" }, { "anonymous": false, "inputs": [ { "indexed": true, "name": "from", "type": "address" }, { "indexed": true, "name": "to", "type": "address" }, { "indexed": false, "name": "value", "type": "uint256" } ], "name": "Transfer", "type": "event" }, { "constant": false, "inputs": [ { "name": "_to", "type": "address" }, { "name": "_value", "type": "uint256" } ], "name": "transfer", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [ { "name": "_spender", "type": "address" }, { "name": "_value", "type": "uint256" } ], "name": "approve", "outputs": [ { "name": "success", "type": "bool" } ], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [ { "name": "_from", "type": "address" }, { "name": "_value", "type": "uint256" } ], "name": "burnFrom", "outputs": [ { "name": "success", "type": "bool" } ], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [ { "name": "newSellPrice", "type": "uint256" }, { "name": "newBuyPrice", "type": "uint256" } ], "name": "setPrices", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [ { "name": "_from", "type": "address" }, { "name": "_to", "type": "address" }, { "name": "_value", "type": "uint256" } ], "name": "transferFrom", "outputs": [ { "name": "success", "type": "bool" } ], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [ { "name": "times", "type": "uint256" } ], "name": "setRewardTimes", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [ { "name": "_value", "type": "uint256" } ], "name": "burn", "outputs": [ { "name": "success", "type": "bool" } ], "payable": false, "stateMutability": "nonpayable", "type": "function" } ];
var sc_token_address = "0x47021453792cea318d24837f8da1b33d526d6b80";//"0x9ebce74efdab6bd234c621dbdecac4407c6e0325";
var BDGToken;


/* Variables */
var cAccounts = [];
var default_account = 0x00;
var contract_token_balance = 0;
var p_cnt = 0;
var gas_price = 0;

(function() {
    'use strict';

    init();

    getAccount();

    updateBalance();

    UsedGoodsShop.productCnt.call((err, res) => {
        if(!err){
            p_cnt = res;
            if(p_cnt > 0)
                getProductList();
        }
    });



    //Contract = web3.eth.contract(sc_abi);
    //UsedGoodsShop = Contract.at(sc_address);

    //var p1 = UsedGoodsShop.getProductInfo(1);
    //console.log(p1);

    //var blockFilter = web3.eth.filter('latest');
    //blockFilter.watch(function(error, blockHash) {
    //    var block = web3.eth.getBlock(blockHash);
    //    //appendLog('New Block('+block.number+')['+block.hash+'] / ' + block.transactions.length + ' TXs');
    //});


    $("#productRegBtn").click(function(){

        var p_name = $("#regProductName").val();
        var p_summary = $("#regProductSummary").val();
        var p_price = $("#regProductPrice").val();
        var p_image = $("#regProductImage").val();

        if(p_name == "" || p_summary == "" || p_price == ""){
            alert('상품 등록을 위한 값을 모두 입력하셔야 합니다.');

            return false;
        }

        const transactionObject = {
            from: cAccounts[0],
            gas: web3.toHex(300000),
            gasPrice: gas_price
        };

        site_log.println("Product Registration : " + p_name);

        UsedGoodsShop.regProduct.sendTransaction(p_name, p_price, p_summary, p_image, transactionObject, (err, res) => {
            if(!err){
                console.log(res);
                site_log.println("Product Registration Tx info : <a href=\"https://testnet.etherscan.io/tx/" + res + "\" target=\"_blank\">" + res + "</a>");
            }
        });

        UsedGoodsShop.RegProduct().watch(function(err, res){
           if(!err){
               console.log(res);
               site_log.println("Callback Product Registration Tx info Start >> ");
               site_log.println("address : " + res.address);
               site_log.println("blockHash : " + res.blockHash);
               site_log.println("blockNumber : " + res.blockNumber);
               site_log.println("transactionHash : " + res.transactionHash);
               site_log.println("address : " + res.address);

               alert('등록되었습니다. 제품 등록까지 최대 수분이 소요될 수 있습니다.');
           }
        });

    });


    $("#productList").on("click", ".btn-product-buy", function(){

        var p_id = $(this).data("product-id");
        var p_seller = $(this).data("product-seller");
        var p_price = $(this).data("product-price");

        const transactionObject = {
            from: cAccounts[0],
            gas: web3.toHex(300000),
            gasPrice: gas_price
        };

        site_log.println("Buy Product : " + p_id);

        UsedGoodsShop.buy.sendTransaction(p_id, transactionObject, function(err, res){
            if(!err){
                console.log(res);
                site_log.println("Buy Product Tx info : <a href='https://ropsten.etherscan.io/tx/"+ res + "' target='_blank'>" + res + "</a>");

                alert('상품 구입 Tx이 생성되었습니다.');

            }else{console.log(err); alert('상품 구입에 실패 했습니다. 잠시 후 다시 이용해 주세요!');}
        });

        UsedGoodsShop.BuyProduct().watch(function(err, res){
            if(!err){
                console.log(res);
                site_log.println("Callback Buy Product Tx info Start >> ");
                site_log.println("address : " + res.address);
                site_log.println("blockHash : " + res.blockHash);
                site_log.println("blockNumber : " + res.blockNumber);
                site_log.println("transactionHash : " + res.transactionHash);
                site_log.println("address : " + res.address);

                alert('상품 구입 요청이 처리 되었습니다.\n상품 수령 후 꼭 구매완료 버튼을 클릭해 주세요!');
            }

        });
    });

})();


function init(){
    site_log.println("UGS Init");

    initWeb3();

    atContractUGS();

    web3.eth.getGasPrice(function(err, res){
        if(!err)
            gas_price = web3.toHex(res);
    });

}

function initWeb3() {
    site_log.println("Web3 Init");

    var Web3 = require('web3');

    // Initialize web3 and set the provider to the testRPC.
    if (typeof web3 !== 'undefined') {
        web3Provider = web3.currentProvider;
        web3 = new Web3(web3.currentProvider);
    } else {
        // set the provider you want from Web3.providers
        web3 = new Web3(new Web3.providers.HttpProvider("https://ropsten.infura.io/nFnPWCftPWfUdCseeOTz"));
    }

    web3.eth.getAccounts((err, res) => {
        console.log(res[0]);
        if(!res[0]){
            alert("MetaMask가 설치되지 않았거나, 로그인 전입니다. 미설치거나 로그인 하지 않으시면 모든 거래가 불가합니다.");
            return false;
        }
    });
}

function atContractUGS(){
    site_log.println("Create Contract : token, shop");

    Contract = web3.eth.contract(sc_abi);
    UsedGoodsShop = Contract.at(sc_address);

    Contract = web3.eth.contract(sc_token_abi);
    BDGToken = Contract.at(sc_token_address);
}

function updateBalance() {
    site_log.println("Get contract token balance");

    //test : 0x8EfB0Ee0cA572CB26F9160A2EB381813dF1E1Cc4
    //var address = sc_address;//web3.eth.accounts[0];
    //var balance = web3.fromWei(web3.eth.getBalance(address), 'ether');
    var addr = sc_address;
    var balance = 0;//web3.fromWei(BDGToken.balanceOf(address), 'ether');
    BDGToken.balanceOf(addr, (error, result) => {
        if(error == null){
            contract_token_balance = result;//web3.fromWei(result, 'ether');
            $('#balanceAmount').html(parseFloat(contract_token_balance));
            site_log.println("Contract balance : " + contract_token_balance + " BDGT");
        }else{
            console.log(error);
        }
    });


}

function getProductList(){
    site_log.println("Get Products Info from Smart Contract");

    if(!p_cnt || p_cnt <= 0)
        return;

    var pList = $('#productList');
    var pTemplate = $('#productTemplate');

    for(var i = 0 ; i < p_cnt ; i++){
        var item = 0;UsedGoodsShop.products.call(i, function(err, item){
            if(!err){
                site_log.println("Get Product info : " + item);
                console.log(item);

                var domItem = $(pTemplate).clone();

                var strBtn = "<button class=\"btn-product-buy flex-c-m size1 bg4 bo-rad-23 hov1 s-text1 trans-0-4\" tabindex=\"0\" data-product-id=\""+parseInt(item[0])+"\"> Buy </button>";
                $(".block2-btn-addcart", domItem).html(strBtn);//.data("product-seller", item[1]).data("product-price", parseInt(item[3]));


                var pName = item[2];

                if(parseInt(item[11]) == 1){
                    $(".btn-product-buy", domItem).html("Trading!").removeClass("btn-product-buy");
                    pName += "(<span class='fc-blue'>Trading</span>)";
                }

                if(parseInt(item[11]) == 3){
                    $(".btn-product-buy", domItem).html("SOLD OUT!").removeClass("btn-product-buy");
                    pName += "(<span class='fc-red'>SOLD OUT</span>)";
                }

                $(".product-name", domItem).html(pName);
                $(".product-summary", domItem).html("No."+String(item[0]) + " 등록자 : " + item[1] + "<br>" + item[4]);
                $(".product-price", domItem).html(String(item[3]) + " BDGT");
                $(".product-seller", domItem).html(item[1]);
                $(".product-image", domItem).attr("src", "uploads/" + item[5]);


                $("#productList").append($(domItem).html());


            }
        });

    }

    //slick2_init();

}

function getAccount(){
    web3.eth.getAccounts(function(error, accounts) {
        if(!error) {
            cAccounts = accounts;
            default_account = cAccounts[0];
            $('#regProductSellerAddress').val(default_account);
        }
        else
            console.log(error);
    });
}


function sendTransaction() {
    web3.personal.unlockAccount(web3.eth.accounts[0],'0x8EfB0Ee0cA572CB26F9160A2EB381813dF1E1Cc4');

    var toAddress = $('#toAddress').val();
    var sendAmount = web3.toWei($('#sendAmount').val(), 'ether');

    var txHash = web3.eth.sendTransaction({
        from: web3.eth.coinbase,
        to: toAddress,
        value: sendAmount,
        gas: 21000  //gas는 default가 90000이며, data 필드를 사용하지 않는 기본 Transaction의 Gas는 현재 21,000이다.
    });

    console.log(txHash);
}

//contract Deploy
function deploy(){
    UsedGoodsShop = Contract.new({
        data:code,
        gas:2000000,
        from:web3.eth.accounts[0]
    }, function (error, contract) {
        if (!error) {
            if (!contract.address) {
                _log("Creating Contract : " + contract.transactionHash);
            } else {
                address = contract.address;
                _log("Contract Deployed : " + contract.address);
            }
        } else
            console.error(error);
    });
};

function send() {
    web3.eth.sendTransaction({
        from: web3.eth.coinbase,
        to: '0xE767aEB31dAAF66366999F72FB5De2CEEA76c277',
        value: web3.toWei(document.getElementById("amount").value, 'ether')
    }, function(error, result) {
        if (!error) {
            document.getElementById('response').innerHTML = 'Success: <a href="https://testnet.etherscan.io/tx/' + result + '"> View Transaction </a>'
        } else {
            document.getElementById('response').innerHTML = '<pre>' + error + '</pre>'
        }
    })
}

